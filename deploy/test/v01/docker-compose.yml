version: "3"
services:

  front:
    image: nexus.rzd/rzd-hub/oup/effect-react-dev:0.1
    ports:
      - "8080:8080"
    environment:
      - TZ=Europe/Moscow
    deploy:
      restart_policy:
        condition: on-failure

  back:
    image: nexus.rzd/rzd-hub/oup/effect-fastapi:0.1
    ports:
      - "8081:8081"
    environment:
      - TZ=Europe/Moscow
    volumes:
      - "/effect/backend/config:/app/backend/config"
      - "/effect/backend/logs:/app/backend/logs"
      - "/effect/backend/files:/app/backend/files"
      - "/effect/backend/docs:/app/backend/docs"
    deploy:
      restart_policy:
        condition: on-failure

  nginx:
    image: nexus.rzd/rzd-hub/oup/effect-nginx-test:0.1
    ports:
      - "80:80"
    environment:
      - TZ=Europe/Moscow
    deploy:
      restart_policy:
        condition: on-failure
